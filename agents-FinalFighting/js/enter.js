$(document).ready(function(){var str=new Array("attack","victory","ace","legendary","rampage","unstoppable","godlike","firstblood","defeat","pentakill","doublekill","quadrakill","triplekill","killingspree","reconnect");var pos=0;var con=0;var now=0;var blood=60;var tower=parseInt($(".tower").html());var acKey="";var ran=Math.floor(Math.random()*15);var judgeCountry=1;var ready=null;var timer=null;var speed=5;var findJh=60;var findTime=null;$(".tip").html(str[ran]);jQuery(document).ready(function($){$(".word").lbyl({content:"邪恶的诺克萨斯企图想统治整个瓦罗兰大陆，对诸多国家发动侵略战争，因此，由数个国家组成的正义联盟就此诞生，一场正义与邪恶之间的大战一触即发。集爱国主义和正义感于一身的你，选择一个正义联盟国家，加入战斗吧！",speed:50,type:"show"})});$(document).ready(function(){$(".intro").stop().animate({"opacity":0.6},1500).animate({"opacity":1},1500,function(){$(this).animate({"opacity":0.6},1500).animate({"opacity":1},800,function(){$(this).siblings().fadeIn(300)})})});$(".close").click(function(){$(this).fadeOut(500).parent().fadeOut(500,function(){$(".name").fadeIn(1000).siblings(".start").fadeIn(1000)})});$(".start-game").click(function(){$(this).stop().css({"background":"url(../images/enter_game_down.png)"});$(".enter-bg").fadeOut(1000).siblings(".select-country").fadeIn(1000)});$(".select-con div").click(function(){$(this).css({"box-shadow":"0 0 0 10px #ffa751"}).siblings().css({"box-shadow":"none"})});$(".confirm").click(function(event){$(this).css({"box-shadow":"0 0 0 5px #ffa751","border-radius":"10px"});$(".select-country").fadeOut(500).siblings(".game").fadeIn(500);ready=setTimeout(startCount(100*speed),1000)});$(".aiouniya").click(function(event){judgeCountry=1});$(".demaxiya").click(function(event){judgeCountry=2});$(".wuweixianfeng").click(function(event){judgeCountry=3});$(document).keydown(function(event){acKey=String.fromCharCode(event.keyCode).toLowerCase();move(con)});function move(num){if(acKey==str[ran][num]){pos+=16;$(".player").animate({"left":pos+"px"},200);tower-=100;$(".tower").html(tower).animate({"width":tower/5000*200+"px"},200);if(tower<=0){clearInterval(timer);con=0;tower=0;$(".tower").html(tower);$(".game").fadeOut(500).siblings(".next").fadeIn(500)}con++;if(con>=str[ran].length){con=0;ran=Math.floor(Math.random()*15);$(".tip").fadeOut(800).html(str[ran]).fadeIn(800)}}}function startCount(t){timer=setInterval(count,t)}function count(){if(blood<=0){clearInterval(timer);$(".game").fadeOut(500).siblings(".defeat-outer").fadeIn(500)}blood-=1;$(".blood").css({"height":blood/60*40+"px"});choose()}function choose(){if(judgeCountry==1){if(blood%4==0){$(".player img").attr("src","../images/player1.png")}else{if(blood%4==1){$(".player img").attr("src","../images/player2.png")}else{if(blood%4==2){$(".player img").attr("src","../images/player3.png")}else{$(".player img").attr("src","../images/player4.png")}}}}else{if(judgeCountry==2){if(blood%4==0){$(".player img").attr("src","../images/player5.png")}else{if(blood%4==1){$(".player img").attr("src","../images/player6.png")}else{if(blood%4==2){$(".player img").attr("src","../images/player7.png")}else{$(".player img").attr("src","../images/player8.png")}}}}else{if(blood%4==0){$(".player img").attr("src","../images/player1.png")}else{if(blood%4==1){$(".player img").attr("src","../images/player2.png")}else{if(blood%4==2){$(".player img").attr("src","../images/player3.png")}else{$(".player img").attr("src","../images/player4.png")}}}}}}$(".continue").click(function(event){if(speed>3){ready=setTimeout(startCount(100*speed),1000);$(".next").fadeOut(400).siblings(".game").fadeIn(400);ran=Math.floor(Math.random()*15);$(".tip").html(str[ran]);blood=60;$(".blood").css({"height":blood/60*40+"px"});$(".tower").html(5000);tower=parseInt($(".tower").html());$(".tower").css({"width":tower/5000*200+"px"});pos=0;$(".player").css({"left":pos+"px"});speed--}else{console.log(111);$(".next").fadeOut(400).siblings(".wrap-jh").fadeIn(400);if(findTime){clearInterval(findTime)}findJf()}});$(".again").click(function(event){$(".defeat-outer").fadeOut(500).siblings(".enter-bg").fadeIn(500);ran=Math.floor(Math.random()*15);$(".tip").html(str[ran]);blood=60;$(".blood").css({"height":blood/60*40+"px"});$(".tower").html(5000);tower=parseInt($(".tower").html());$(".tower").css({"width":tower/5000*200+"px"});pos=0;$(".player").css({"left":pos+"px"});speed=5});$(".wrap-jh .again").click(function(event){$(this).parent("div").fadeOut(500);$(".wrap-jh").fadeOut(500).siblings(".enter-bg").fadeIn(500);ran=Math.floor(Math.random()*15);$(".tip").html(str[ran]);blood=60;$(".blood").css({"height":blood/60*40+"px"});$(".tower").html(5000);tower=parseInt($(".tower").html());$(".tower").css({"width":tower/5000*200+"px"});pos=0;$(".player").css({"left":pos+"px"});speed=5;findJh=60;clearInterval(findTime)});function findJf(){var leftX=0;var topY=0;var heightY=870;var widthX=1000;var topArr=differentRandom(6,heightY,0);var leftArr=differentRandom(6,widthX,0);var boolOne=false;var boolTwo=false;var boolThree=false;var boolFour=false;var boolFive=false;var boolSix=false;findTime=setInterval(findcount,1000);
function findcount(){if(findJh<=0){$(".intro-find em").html(0);$(".wrap-jh .defeat").fadeIn(500);$(".outer-jh div").unbind("click")}else{findJh--;$(".intro-find em").html(findJh)}}if(parseInt($(".intro-find em").html())<=0){$(".game").fadeOut(500).siblings(".defeat-outer").fadeIn(500)}equipmentShow("wujin.jpg","yinxue.jpg","pb.jpg","qingyu.png","bingcui_jh.png","heique.png");function equipmentShow(eptone,epttwo,eptthree,eptfour,eptfive,eptsix){$(".equipment-one").css({left:leftArr[0],top:topArr[0]});$(".equipment-one").bind("click",function(){$(this).children().css("display","block");$(this).children("img").stop(true).fadeOut("400",function(){$(".descreaption span").eq(0).append('<img src= "../images/'+eptone+'"'+'alt="无尽之刃" />');$(this).siblings(".breathe-btn").css("display","none")});boolOne=true;$(this).unbind("click")});$(".equipment-two").css({left:leftArr[1],top:topArr[1]});$(".equipment-two").click(function(event){$(this).children().css("display","block");$(this).children("img").stop(true).fadeOut("400",function(){$(".descreaption span").eq(1).append('<img src= "../images/'+epttwo+'"'+'alt="无尽之刃" />');$(this).siblings(".breathe-btn").css("display","none")});boolTwo=true;$(this).unbind("click")});$(".equipment-three").css({left:leftArr[2],top:topArr[2]});$(".equipment-three").click(function(event){$(this).children().css("display","block");$(this).children("img").stop(true).fadeOut("400",function(){$(".descreaption span").eq(2).append('<img src= "../images/'+eptthree+'"'+'alt="无尽之刃" />');$(this).siblings(".breathe-btn").css("display","none")});boolThree=true;$(this).unbind("click")});$(".equipment-four").css({left:leftArr[3],top:topArr[3]});$(".equipment-four").click(function(event){$(this).children().css("display","block");$(this).children("img").stop(true).fadeOut("400",function(){$(".descreaption span").eq(3).append('<img src= "../images/'+eptfour+'"'+'alt="无尽之刃" />');$(this).siblings(".breathe-btn").css("display","none")});boolFour=true;$(this).unbind("click")});$(".equipment-five").css({left:leftArr[4],top:topArr[4]});$(".equipment-five").click(function(event){$(this).children().css("display","block");$(this).children("img").stop(true).fadeOut("400",function(){$(".descreaption span").eq(4).append('<img src= "../images/'+eptfive+'"'+'alt="无尽之刃" />');$(this).siblings(".breathe-btn").css("display","none")});boolFive=true;$(this).unbind("click")});$(".equipment-six").css({left:leftArr[5],top:topArr[5]});$(".equipment-six").click(function(event){$(this).children().css("display","block");$(this).children("img").stop(true).fadeOut("400",function(){$(".descreaption span").eq(5).append('<img src= "../images/'+eptsix+'"'+'alt="无尽之刃" />');$(this).siblings(".breathe-btn").css("display","none")});boolSix=true;$(this).unbind("click")})}function victoryOrDefeat(){if(boolOne&&boolTwo&&boolThree&&boolFour&&boolFive&&boolSix){$(".win").fadeIn(500);clearInterval(findTime)}}$(document).click(function(){victoryOrDefeat();$("document").append("")});function differentRandom(len,x,y){var arr=[];var num;for(var i=0;i<len;i++){num=Math.floor(Math.random()*x+y);for(var j=0;j<arr.length;j++){if(num==arr[j]){num=Math.floor(Math.random()*x+y);j=-1}}arr.push(num)}return arr}}});